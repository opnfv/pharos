##############################################################################
# Copyright (c) 2018 Canonical Ltd. and others.
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Apache License, Version 2.0
# which accompanies this distribution, and is available at
# http://www.apache.org/licenses/LICENSE-2.0
##############################################################################
---
lab:
  location: intel
  racks:
    - rack: pod18
      nodes:
    - name: {{ conf['nodes'][0]['name'] }}
      architecture: {{ conf['nodes'][0]['node']['arch'] }}
      roles: [network, control]
      nics:
        - ifname: {{ conf['nodes'][0]['interfaces'][1]['name'] }}.{{ conf['nodes'][0]['interfaces'][1]['vlan'] }}
          spaces: [admin]
          mac: ["{{ conf['nodes'][0]['interfaces'][1]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][0]['interfaces'][2]['name'] }}.{{ conf['nodes'][0]['interfaces'][2]['vlan'] }}
          spaces: [data]
          mac: ["{{ conf['nodes'][0]['interfaces'][2]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][0]['interfaces'][0]['name'] }}.{{ conf['nodes'][0]['interfaces'][0]['vlan'] }}
          spaces: [floating]
          mac: ["{{ conf['nodes'][0]['interfaces'][0]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][0]['interfaces'][3]['name'] }}.{{ conf['nodes'][0]['interfaces'][3]['vlan'] }}
          spaces: [public]
          mac: ["{{ conf['nodes'][0]['interfaces'][3]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][0]['interfaces'][3]['name'] }}
          spaces: [storage]
          mac: ["{{ conf['nodes'][0]['interfaces'][3]['mac_address'] }}"]
      power:
        type: {{ conf['nodes'][0]['remote_management']['type'] }}
        address: {{ conf['nodes'][0]['remote_management']['address'] }}
        user: {{ conf['nodes'][0]['remote_management']['user'] }}
        pass: {{ conf['nodes'][0]['remote_management']['pass'] }}
    - name: {{ conf['nodes'][1]['name'] }}
      architecture: {{ conf['nodes'][1]['node']['arch'] }}
      roles: [compute, control, storage]
      nics:
        - ifname: {{ conf['nodes'][1]['interfaces'][1]['name'] }}.{{ conf['nodes'][1]['interfaces'][1]['vlan'] }}
          spaces: [admin]
          mac: ["{{ conf['nodes'][1]['interfaces'][1]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][1]['interfaces'][2]['name'] }}.{{ conf['nodes'][1]['interfaces'][2]['vlan'] }}
          spaces: [data]
          mac: ["{{ conf['nodes'][1]['interfaces'][2]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][1]['interfaces'][0]['name'] }}.{{ conf['nodes'][1]['interfaces'][0]['vlan'] }}
          spaces: [floating]
          mac: ["{{ conf['nodes'][1]['interfaces'][0]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][1]['interfaces'][3]['name'] }}.{{ conf['nodes'][1]['interfaces'][3]['vlan'] }}
          spaces: [public]
          mac: ["{{ conf['nodes'][1]['interfaces'][3]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][1]['interfaces'][3]['name'] }}
          spaces: [storage]
          mac: ["{{ conf['nodes'][1]['interfaces'][3]['mac_address'] }}"]
      power:
        type: {{ conf['nodes'][1]['remote_management']['type'] }}
        address: {{ conf['nodes'][1]['remote_management']['address'] }}
        user: {{ conf['nodes'][1]['remote_management']['user'] }}
        pass: {{ conf['nodes'][1]['remote_management']['pass'] }}
    - name: {{ conf['nodes'][2]['name'] }}
      architecture: {{ conf['nodes'][2]['node']['arch'] }}
      roles: [compute, control, storage]
      nics:
        - ifname: {{ conf['nodes'][2]['interfaces'][1]['name'] }}.{{ conf['nodes'][2]['interfaces'][1]['vlan'] }}
          spaces: [admin]
          mac: ["{{ conf['nodes'][2]['interfaces'][1]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][2]['interfaces'][2]['name'] }}.{{ conf['nodes'][2]['interfaces'][2]['vlan'] }}
          spaces: [floating]
          mac: ["{{ conf['nodes'][2]['interfaces'][2]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][2]['interfaces'][0]['name'] }}.{{ conf['nodes'][2]['interfaces'][0]['vlan'] }}
          spaces: [public]
          mac: ["{{ conf['nodes'][2]['interfaces'][0]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][2]['interfaces'][3]['name'] }}.{{ conf['nodes'][2]['interfaces'][3]['vlan'] }}
          spaces: [storage]
          mac: ["{{ conf['nodes'][2]['interfaces'][3]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][2]['interfaces'][3]['name'] }}
          spaces: [storage]
          mac: ["{{ conf['nodes'][2]['interfaces'][3]['mac_address'] }}"]
      power:
        type: {{ conf['nodes'][2]['remote_management']['type'] }}
        address: {{ conf['nodes'][2]['remote_management']['address'] }}
        user: {{ conf['nodes'][2]['remote_management']['user'] }}
        pass: {{ conf['nodes'][2]['remote_management']['pass'] }}
    - name: {{ conf['nodes'][3]['name'] }}
      architecture: {{ conf['nodes'][3]['node']['arch'] }}
      roles: [compute, storage]
      nics:
        - ifname: {{ conf['nodes'][3]['interfaces'][1]['name'] }}.{{ conf['nodes'][3]['interfaces'][1]['vlan'] }}
          spaces: [admin]
          mac: ["{{ conf['nodes'][3]['interfaces'][1]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][3]['interfaces'][2]['name'] }}.{{ conf['nodes'][3]['interfaces'][2]['vlan'] }}
          spaces: [data]
          mac: ["{{ conf['nodes'][3]['interfaces'][2]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][3]['interfaces'][0]['name'] }}.{{ conf['nodes'][3]['interfaces'][0]['vlan'] }}
          spaces: [floating]
          mac: ["{{ conf['nodes'][3]['interfaces'][0]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][3]['interfaces'][3]['name'] }}.{{ conf['nodes'][3]['interfaces'][3]['vlan'] }}
          spaces: [public]
          mac: ["{{ conf['nodes'][3]['interfaces'][3]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][3]['interfaces'][3]['name'] }}
          spaces: [storage]
          mac: ["{{ conf['nodes'][3]['interfaces'][3]['mac_address'] }}"]
      power:
        type: {{ conf['nodes'][3]['remote_management']['type'] }}
        address: {{ conf['nodes'][3]['remote_management']['address'] }}
        user: {{ conf['nodes'][3]['remote_management']['user'] }}
        pass: {{ conf['nodes'][3]['remote_management']['pass'] }}
    - name: {{ conf['nodes'][4]['name'] }}
      architecture: {{ conf['nodes'][4]['node']['arch'] }}
      roles: [compute, storage]
      nics:
        - ifname: {{ conf['nodes'][4]['interfaces'][1]['name'] }}.{{ conf['nodes'][4]['interfaces'][1]['vlan'] }}
          spaces: [admin]
          mac: ["{{ conf['nodes'][4]['interfaces'][1]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][4]['interfaces'][2]['name'] }}.{{ conf['nodes'][4]['interfaces'][2]['vlan'] }}
          spaces: [data]
          mac: ["{{ conf['nodes'][4]['interfaces'][2]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][4]['interfaces'][0]['name'] }}.{{ conf['nodes'][4]['interfaces'][0]['vlan'] }}
          spaces: [floating]
          mac: ["{{ conf['nodes'][4]['interfaces'][0]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][4]['interfaces'][3]['name'] }}.{{ conf['nodes'][4]['interfaces'][3]['vlan'] }}
          spaces: [public]
          mac: ["{{ conf['nodes'][4]['interfaces'][3]['mac_address'] }}"]
        - ifname: {{ conf['nodes'][1]['interfaces'][2]['name'] }}
          spaces: [storage]
          mac: ["{{ conf['nodes'][4]['interfaces'][3]['mac_address'] }}"]
      power:
        type: {{ conf['nodes'][4]['remote_management']['type'] }}
        address: {{ conf['nodes'][4]['remote_management']['address'] }}
        user: {{ conf['nodes'][4]['remote_management']['user'] }}
        pass: {{ conf['nodes'][4]['remote_management']['pass'] }}
      floating-ip-range: 10.5.15.6,10.5.15.250,10.5.15.1,10.5.15.0/24
      ext-port: "nic1.native"
      dns: {{ conf.idf['net_config']['public']['dns'][0] }}
      osdomainname:
  opnfv:
    release: f
    distro: xenial
    type: noha
    openstack: pike
    sdncontroller:
      - type: nosdn
    storage:
      - type: ceph
        disk: /dev/sdb
    feature: odl_l2
    spaces:
      - type: admin  # admin
        bridge: {{ conf.idf['net_config']['admin']['bridge'] }}
        cidr: {{ conf.idf['net_config']['admin']['network'] }}/{{ conf.idf['net_config']['admin']['mask'] }}
        gateway: {{ conf.idf['net_config']['admin']['gateway'] }}
        vlan:
      - type: data  # mgmt
        cidr: {{ conf.idf['net_config']['mgmt']['network'] }}/{{ conf.idf['net_config']['mgmt']['mask'] }}
        gateway:
        vlan:
      - type: storage  # storage
        cidr: {{ conf.idf['net_config']['storage']['network'] }}/{{ conf.idf['net_config']['storage']['mask'] }}
        gateway:
        vlan:
      - type: floating  # private
        bridge: {{ conf.idf['net_config']['private']['bridge'] }}
        cidr: {{ conf.idf['net_config']['private']['network'] }}/{{ conf.idf['net_config']['private']['mask'] }}
        gateway:
        vlan:
      - type: public  # public
        cidr: {{ conf.idf['net_config']['public']['network'] }}/{{ conf.idf['net_config']['public']['mask'] }}
        gateway: {{ conf.idf['net_config']['public']['gateway'] }}
        vlan: {{ conf.idf['net_config']['public']['vlan'] }}
