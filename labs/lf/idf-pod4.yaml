##############################################################################
# Copyright (c) 2018 Linux Foundation, Mirantis Inc., Enea AB and others.
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Apache License, Version 2.0
# which accompanies this distribution, and is available at
# http://www.apache.org/licenses/LICENSE-2.0
##############################################################################
---
### LF POD 2 installer descriptor file ###

idf:
  version: 0.1
  net_config: &net_config
    admin:
      interface: nic1
      vlan: native
      network: 10.20.0.0
      mask: 25
      gateway: 10.20.0.1
      dns: 10.20.0.1
    mgmt:
      interface: nic2
      vlan: 450
      network: 192.168.0.0
      mask: 25
    storage:
      interface: nic3
      vlan: 451
      network: 192.168.1.0
      mask: 25
    private:
      interface: nic4
      vlan: 452
      network: 192.168.2.0
      mask: 25
    public:
      interface: nic5
      vlan: 414
      network: 172.30.12.64
      mask: 26
  xci:
    net_config: *net_config
    nodes_roles:
      opnfv_host: [opnfv_host]
      pod4-node1: [compute, storage]
      pod4-node2: [compute, storage]
      pod4-node3: [controller, storage]
      pod4-node4: [controller, storage]
      pod4-node5: [controller, storage]

    # net_config network to be used by the PXE
    pxe_network: admin

    # As the MAC of generated bridges are generated, we use a list of local
    # bridges to create libvirt networks
    jumphost_interfaces_bridges:
      - name: br_xci_admin
        ip: 10.20.0.3

    extra_addresses:
      opnfv_host: 10.20.0.9
  #
  # This block is copied from idf-pod2.yaml to avoid jenkins blocking the
  # patch. It has not been changed to pod4 specificities
  #
  fuel:
    jumphost:
      bridges:
        admin: 'pxebr'
        mgmt: 'br-ctl'
        private: ~
        public: ~
    network:
      node:
        # Ordered-list, index should be in sync with node index in PDF
        - interfaces: &interfaces
            # Ordered-list, index should be in sync with interface index in PDF
            - 'enp6s0'
            - 'enp7s0'
            - 'enp8s0'
            - 'enp9s0'
          busaddr: &busaddr
            # Bus-info reported by `ethtool -i ethX`
            - '0000:06:00.0'
            - '0000:07:00.0'
            - '0000:08:00.0'
            - '0000:09:00.0'
        - interfaces: *interfaces
          busaddr: *busaddr
        - interfaces: *interfaces
          busaddr: *busaddr
        - interfaces: *interfaces
          busaddr: *busaddr
        - interfaces: *interfaces
          busaddr: *busaddr
